---
import '@styles/stilo.scss';
import Head from "@components/_head.astro";
import Footer from "@components/dashboard/_footer.astro";
import Topbar from "@components/dashboard/_topbar.astro";
import Sidenav from "@components/dashboard/_sidenav.astro";
import Scripts from "@components/_scripts.astro";
import RegistroResumenReact from "@components/dashboard/react/_registroResumen.jsx";
import EstadoVehiculosReact from '@components/dashboard/react/_estadoVehiculos.jsx';
import RendimientoComparativo from "@components/dashboard/react/_rendimientoComparativo.jsx";


import AlertasPendientes from "@components/dashboard/_alertasPendientes.astro";
const disponibles = 26;
const mantenimiento = 4;
const transito = 10;
const vehiculos = [
  
  { nombre: "CAMION DAJ441", base: "MALIBU", estado: "disponible" },
  { nombre: "VOLQUETA SFF404", base: "CARTAGENA", estado: "mantenimiento" },
  { nombre: "CAMION DAS345", base: "BARRANQUILLA", estado: "transito" },
  { nombre: "CAMION DAJ441", base: "MALIBU", estado: "disponible" },
  { nombre: "VOLQUETA SFF404", base: "CARTAGENA", estado: "mantenimiento" },
  { nombre: "CAMION DAS345", base: "BARRANQUILLA", estado: "transito" },
  { nombre: "CAMION DAJ441", base: "MALIBU", estado: "disponible" },
  { nombre: "CAMION DAJ441", base: "MALIBU", estado: "disponible" },
 
];


const title = "AdminLTE v4 | Dashboard";
const path = "../../dist";
const mainPage = "dashboard";
const page = "index";
---

<!doctype html>
<html lang="en">
  <!--begin::Head-->
  <head>
    <Head title={title} path={path} />
    <!-- jsvectormap -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/jsvectormap@1.5.3/dist/css/jsvectormap.min.css"
      integrity="sha256-+uGLJmmTKOqBr+2E6KDYs/NRsHxSkONXFHUL0fy2O/4="
      crossorigin="anonymous"
    />
  </head>
  <!--end::Head-->
  <!--begin::Body-->
  <body class="layout-fixed sidebar-expand-lg bg-body-tertiary">
    

    <!--begin::App Wrapper-->
    <div class="app-wrapper">
    <Sidenav path={path} mainPage={mainPage} page={page} />

      <Topbar path={path} />
      <!--begin::App Main-->
      <main class="app-main">
        <!--begin::App Content Header-->
        <div class="app-content-header">
          <!--begin::Container-->
          <div class="container-fluid">
            <!--begin::Row-->
            <div class="row">
              <div class="col-sm-6">
                <h2 class="mb-0"   style="color: rgba(26, 54, 93, 1);font-weight:bold;font-family:'verdana';">Control de Flota</h2>
                <h4   style="color: rgba(26, 54, 93, 1);font-family:'verdana';"> Resumen Diario </H4>
              </div>
              <div class="col-sm-6">
               
                <ol class="breadcrumb float-sm-end">
                  <li class="breadcrumb-item"><a href="#">Home</a></li>
                  <li class="breadcrumb-item active" aria-current="page">
                    Panel de Control
                  </li>
                </ol>
              </div>
            </div>
            <!--end::Row-->
            </div>  

    <div class="d-flex justify-content-end align-items-baseline gap-3">
  <div>
    <button class="btn btn-outline-secondary btn-sm d-inline-flex align-items-center" 
            style="font-weight: bold; color: black;">
      <img src="https://cdn-icons-png.flaticon.com/512/1688/1688988.png" 
           alt="Actualizar" width="16" height="16" class="me-2">
      Actualizar
    </button>
    <div style="color: black; font-size: 0.5rem; margin-top: 4px; line-height: 1;">
      Ãšltima actualizaciÃ³n: 12/04/2025 7:08 A.M
    </div>
  </div>
  
  <button class="btn btn-outline-primary btn-sm" style="font-weight: bold; color: black;">
    ðŸ—“ mayo 2025
  </button>
</div>
</div>
        

        <div class="app-content">
          <!--begin::Container-->
<!--begin::Container-->
<div class="container-fluid">
  <!--begin::Row-->
  <div class="row g-3">

    <!--begin::Col-->
    <div class="col-lg-3 col-md-6 col-sm-6 col-6 mb-3">
      <!--begin::Small Box Widget 1-->
      <div class="small-box bg-white text-dark left-icon-layout h-100 compact-widget">
        <div class="d-flex align-items-center gap-2 gap-md-3">
          <div class="icon-left">
            <span class="emoji-icon">ðŸšš</span>
          </div>
          <div class="inner">
            <h3>26</h3>
            <p>VehÃ­culos Totales</p>
            <span class="trend-indicator">+2% mÃ¡s que ayer</span>
          </div>
        </div>
      </div>
    </div>
    <!--end::Col-->
    <!--begin::Col-->
    <div class="col-lg-3 col-md-6 col-sm-6 col-6 mb-3">
      <!--begin::Small Box Widget 2-->
      <div class="small-box bg-white text-dark left-icon-layout h-100  compact-widget">
        <div class="d-flex align-items-center gap-2 gap-md-3">
          <div class="icon-left">
            <span class="emoji-icon">ðŸ”§</span>
          </div>
          <div class="inner">
            <h3>4</h3>
            <p>En Mantenimiento</p>
            <span class="trend-indicator">+2% mÃ¡s que ayer</span>
          </div>
        </div>
      </div>
    </div>
    <!--end::Col-->
    <!--begin::Col-->
    <div class="col-lg-3 col-md-6 col-sm-6 col-6 mb-3" >

      <!--begin::Small Box Widget 3-->
      <div class="small-box bg-white text-dark left-icon-layout h-100  compact-widget">
        <div class="d-flex align-items-center gap-2 gap-md-3">
          <div class="icon-left">
            <span class="emoji-icon">â›½</span>
          </div>
          <div class="inner">
            <h3>2</h3>
            <p>Combustible Usado</p>
            <span class="trend-indicator">+8% mÃ¡s que ayer</span>
          </div>
        </div>
      </div>
    </div>
    <!--end::Col-->
    <!--begin::Col-->
    <div class="col-lg-3 col-md-6 col-sm-6 col-6 mb-3">
      <!--begin::Small Box Widget 4-->
      <div class="small-box bg-white text-dark left-icon-layout h-100 compact-widget">
        <div class="d-flex align-items-center gap-2 gap-md-3">
          <div class="icon-left">
            <span class="emoji-icon">ðŸ“Š</span>
          </div>
          <div class="inner">
            <h3>12</h3>
            <p>Rendimiento Promedio</p>
            <span class="trend-indicator">+2% mÃ¡s que ayer</span>
          </div>
        </div>
      </div>
    </div>
    <!--end::Col-->
  </div>
 
  <div class="row mb-4">
  <div class="col-lg-7">
    <!-- Espacio vacÃ­o para mantener la alineaciÃ³n -->
  </div>
  <div class="col-lg-5">
    <div class="d-flex justify-content-end gap-2">
      <!-- BotÃ³n de Resumen con dropdown -->
      <div class="dropdown-container position-relative">
        <button class="btn btn-light btn-custom toggle-button">
          Resumen <span class="arrow">â®ž</span>
        </button>
        <div class="dropdown-content">
          <div class="dropdown-inner">
            <ul class="list-group list-group-flush">
  <li class="list-group-item agregar-item" data-card="rendimiento">ComparaciÃ³n de Rendimiento</li>
  <li class="list-group-item agregar-item" data-card="estado">Estado de VehÃ­culos</li>
  <li class="list-group-item agregar-item" data-card="resumen">Resumen del Registro</li>
  <li class="list-group-item agregar-item" data-card="alertas">Alertas Pendientes</li>
</ul>

          </div>
        </div>
      </div>
      
      <!-- BotÃ³n de Agregar con dropdown -->
      <div class="dropdown-container position-relative">
        <button class="btn btn-azul-oscuro btn-custom toggle-button">
          + Agregar <span class="arrow">â®ž</span>
        </button>
          <div class="dropdown-content">
    <div class="dropdown-inner">
      <ul id ="lista-agregar" class="list-group list-group-flush">

      </ul>
    </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Resto de tu contenido (grÃ¡ficos, estado actual, etc.) -->
  <!--begin::Row-->
  <div class="row">
    <!-- Start col: GrÃ¡fica + Resumen -->
    <div class="col-lg-7 col-md-12 mb-4">
      <div class=" d-flex flex-column">
        <!-- Card: Rendimiento Comparativo -->
        <div id="card-rendimiento" class="card mb-4">
          <div class="card-header border-0">
          <button class="btn-close position-absolute end-0 m-2" aria-label="Close"></button>
      <h3 class="card-title"   style="  font-size: 1.8rem; font-weight: bold;color: #000;font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;"   >ComparaciÃ³n de Rendimiento: </h3>
      <h4 class="card-title"   style="  font-size: 1.8rem;font-weight: bold;color: #000;font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">Ayer VS Anteayer</h4>
        
          </div>
          <div class="card-body">

            <RendimientoComparativo
            client:load
              datosAyer={{
                kmRecorridos: 90,
                rendimientoKmGal: 25,
                galonesUsados: 23,
                velocidadMax: 22
              }}
              datosAnteayer={{
                kmRecorridos: 50,
                rendimientoKmGal: 0,
                galonesUsados: 0, 
                velocidadMax: 0
              }}
              fechaAyer="08/04/2025"
              fechaAnteayer="09/04/2025"
            />
          </div>
        </div>
        <!-- /.card -->
        <!-- Card: Registro Resumen -->
         <div id="card-resumen" class="card mb-4">  
          <div class="card-header border-0">
          <button class="btn-close position-absolute end-0 m-2" aria-label="Close"></button>
            <h3 class="card-title invisible">Resumen del Registro</h3>
          </div>
          <div class="card-body">
            
    <RegistroResumenReact client:load />
          </div>
        </div>
        <!-- /.card -->
      </div>
    
    </div>

    
    <!-- /.col-lg-7 -->
    <!-- Start col: Estado VehÃ­culos + Alertas -->
    <div class="col-lg-5 col-md-12 mb-5">
      <div class=" d-flex flex-column">
        <!-- Card: Estado de VehÃ­culos -->
        <div id="card-estado" class="card mb-4">
          <div class="card-header border-0">
           <button class="btn-close position-absolute end-0 m-4" aria-label="Close"></button>
            <h3 class="card-title"  style="  font-size: 1.8rem;font-weight: bold;color: #000;font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;  " >Estado de VehÃ­culos</h3>
          </div>
          <div class="card-body p-0" style="height: 380px; overflow: hidden;">
  <EstadoVehiculosReact client:load vehiculos={vehiculos} />
</div>

        </div>
        <!-- /.card -->
        
        <!-- Card: Alertas Pendientes -->
        <div id="card-alertas" class="card mb-4 ">
          <div class="card-header border-0" >
          <button class="btn-close position-absolute end-0 m-2" aria-label="Close"></button>
            <h3 class="card-title" style="  font-size: 1.8rem;
        font-weight: bold;
        color: #000;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
">Alertas Pendientes</h3>
          </div>
          <div class="card-body"  style="height: 370px;  " >
            <AlertasPendientes 
              alertas={[
                {
                  tipo: 'urgente',
                  mensaje: 'Mantenimiento Urgente',
                  detalle: 'CAMION DA3435 - Programar hoy para revisiÃ³n'
                },
                {
                  tipo: 'advertencia',
                  mensaje: 'Combustible Bajo',
                  detalle: 'Volqueta SVF404 - 15% restante, programar repostaje'
                },
                {
                  tipo: 'informacion',
                  mensaje: 'Eficiencia Mejorada',
                  detalle: 'Hoy la flota consumiÃ³ 8% menos combustible que ayer'
                }
              ]}
            />
          </div>
        </div>
        <!-- /.card -->
      </div>
    </div>
    <!-- /.col-lg-5 -->
  </div>
  <!-- /.row (main row) -->
</div>
<!-- end::Container -->
</div> <!-- end::App Content -->
</main> <!-- end::App Main -->
<Footer />
</div>

<script type="module" src="/js/dashboard.js"></script>


    <!--end::App Wrapper-->
    <!--begin::Script-->
    <Scripts path={path} />
     <script
      src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"
      integrity="sha256-ipiJrswvAR4VAx/th+6zWsdeYmVae0iJuiR+6OqHJHQ="
      crossorigin="anonymous"></script>
      <!-- apexcharts -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.css"
      integrity="sha256-4MX+61mt9NVvvuPjUWdUdyfZfxSB1/Rf9WtqRHgG5S0="
      crossorigin="anonymous"
    />
    <!-- apexcharts -->
    <script
      src="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.min.js"
      integrity="sha256-+vh8GkaU7C9/wbSLIcwq82tQ2wTf44aOHA8HlBMwRI8="
      crossorigin="anonymous"></script>


    <!--end::Script-->
  </body><!--end::Body-->
  


  </html>